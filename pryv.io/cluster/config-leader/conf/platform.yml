vars:
  MACHINES_AND_PLATFORM_SETTINGS:
    name: "Machines and platform settings"
    settings:
      DOMAIN:
        value: REPLACE_ME
        description: "Domain and name of the platform"
      STATIC_WEB_IP_ADDRESS:
        value: REPLACE_ME
        description: "IP address of the machine"
      REG_MASTER_IP_ADDRESS:
        value: REPLACE_ME
        description: "IP address of register master machine"
      REG_MASTER_VPN_IP_ADDRESS:
        value: REPLACE_ME
        description: "IP address of master register on a secure line between it and slave register (such as a private network)"
      REG_SLAVE_IP_ADDRESS:
        value: REPLACE_ME
        description: "IP address of register slave machine"
      REGISTER_ADMIN_KEY: 
        value: REPLACE_ME
        description: "Admin Key for register machine, see: https://api.pryv.com/reference-system/#admin. Please set a strong cryptographic key"
      HOSTINGS_AND_CORES:
        description: "Defines the distribution of cores among the hostings providers"
        value:
          hosting1:
            co1: 
              ip: REPLACE_ME
          hosting2:
            co2:
              ip: REPLACE_ME
      HOSTINGS_PROVIDERS:
        optional: true
        description: "Additional information about the hostings providers. Can be set to null if not used (HOSTINGS_PROVIDERS: null)"
        value:
          hosting1:
            url: https://www.hosting1.ch
            name: Hosting 1
            description: Europe - Switzerland
          hosting2:
            url: https://www.hosting2.ch
            name: Hosting 2
            description: Europe - France
  MISCELLANEOUS_SETTINGS:
    name: "Miscellaneous settings"
    settings:
      LICENSE_NAME:
        value: REPLACE_ME
        description: "License name provided with installation files"
      TEMPLATE_VERSION: 
        value: 1.0.32
        description: "Version of configuration template"
  API_SETTINGS:
    name: "API settings"
    settings:
      EVENT_TYPES_URL: 
        value: https://api.pryv.com/event-types/flat.json
        description: "URL of the file listing the validated Event types. See: https://api.pryv.com/faq-api/#event-types"
      TRUSTED_APPS: 
        value: '*@https://*.DOMAIN*, *@https://pryv.github.io*, *@https://*.rec.la*'
        description: "Web pages authorized to run login API call. 
        See https://api.pryv.com/reference-full/#trusted-apps-verification. 
        You can remove the ones not related to your platform if you are not using Pryv's default apps
        The format is comma-separated list of {trusted-app-id}@{origin} pairs.
        Origins and appIds accept '*' wildcards, but never use wildcard appIds in production.
        Example: *@https://*.DOMAIN*, *@https://pryv.github.io*, *@https://*.rec.la*"
      DEFAULT_AUTH_URL: 
        value: https://sw.DOMAIN/access/access.html
        description: "Default auth url used for the authorization flow (https://api.pryv.com/reference/#auth-request)."
      TRUSTED_AUTH_URLS:
        description: "List of trusted urls that can be used as entry points for the app authorization flow (https://api.pryv.com/reference/#auth-request)."
        value:
          - https://sw.DOMAIN/access/access.html
  SERVICE_INFORMATION_SETTINGS:
    name: "Service information settings"
    optional: true
    description: "https://api.pryv.com/reference/#service-info"
    settings:
      PLATFORM_NAME: 
        value: REPLACE_ME
        description: "The public name of the service eg: Pryv Lab"
      SUPPORT_URL: 
        value: REPLACE_ME
        description: "URL or Email link to support eg: https://pryv.com/helpdesk/or mailto://hsupport@pryv.com" 
      TERMS_OF_USE_URL: 
        value: REPLACE_ME
        description: "URL to the Terms of use of the service. eg.: https://pryv.com/terms-of-use/"
      SERVICE_INFO_ASSETS:
        value: 
          definitions: "https://pryv.github.io/assets-pryv.me/index.json"
        description: "URL of platform visual assets. See: https://github.com/pryv/assets-pryv.me"
  DNS_SETTINGS:
    name: "DNS settings"
    settings:
      DNS_CUSTOM_ENTRIES:
        description: "Additional DNS entries. See the DNS configuration document: https://api.pryv.com/customer-resources/#documents.
        Can be set to null if not used."
        value: 
          test:
            ip: REPLACE_ME
      DNS_ROOT_DOMAIN_A_RECORD: 
        value: REPLACE_ME
        description: "DNS A record for ${DOMAIN} (The IP adress serving an eventual web page accessible by: http://{DOMAIN})"
      DNS_ROOT_TXT_ARRAY:
        value: []
        description: "DNS TXT records for @ value for ${DOMAIN}. Ex.: [\"_globalsign-domain-verification=n3PT\",\"v=spf1 include:_mailcust.gandi.net ?all\"]"
  EMAIL_CONFIGURATION_SETTINGS:
    optional: true
    description: "See the Emails configuration document: https://api.pryv.com/customer-resources/#documents"
    name: "Email configuration"
    settings:
      EMAIL_ACTIVATION:
        description: "Allows to activate/deactivate sending of welcome and password reset emails"
        value: 
          welcome: false
          resetPassword: false
      EMAIL_SENDER:
        description: "Sender name and email address"
        value: 
          name: REPLACE_ME
          address: REPLACE_ME
      EMAIL_TEMPLATES_DEFAULT_LANG: 
        value: en
        description: "Default language for email templates eg: en"
      EMAIL_SMTP_SETTINGS:
        description: "If used, Host, port and credentials of the SMTP server"
        value:
          host: REPLACE_ME
          port: REPLACE_ME
          auth:
            user: REPLACE_ME
            pass: REPLACE_ME
      EMAIL_SENDMAIL_SETTINGS:
        description: "Alternative transport, using sendmail. Will replace SMTP transport if set to true"
        value:
          active: false
  MFA_SETTINGS:
    optional: true
    name: "MFA settings"
    settings:
      MFA_SESSIONS_TTL_SECONDS: 
        value: 1800
        description: "Duration in seconds after which MFA sessions are destroyed"
      MFA_SMS_API_SETTINGS:
        description: "Allow to define an external SMS API handling the MFA challenge"
        value:
          endpoints:
            description: "API endpoints that allow to trigger and verify the MFA challenge"
            value:
              challenge: REPLACE_ME
              verify: REPLACE_ME
          auth: 
            description: "API key, sent as 'Authorization' header"
            value: REPLACE_ME
  ADVANCED_API_SETTINGS:
    optional: true
    name: "Advanced API settings"
    settings:
      SESSION_MAX_AGE: 
        value: 1209600000
        description: "Validity (in seconds) of a personal access token if unused"
      PASSWORD_RESET_MAX_AGE: 
        value: 3600000
        description: "Validity (in seconds) of a password reset request"
      UPDATES_IGNORE_PROTECTED_FIELDS: 
        value: false
        description: "When true, updates will ignore protected fields and print a warning log.
        When false, trying to update read-only fields will fail with a forbidden error"
      WEBHOOKS_SETTINGS:
        description:
          "- minIntervalMs: minimum interval between successive webhook notifications, in milliseconds,
          - maxRetries: number of retried webhook notifications before it becomes inactive,
          - runsSize: size of the runs array"
        value:
          minIntervalMs: 
            value: 5000
            description: "Minimum interval between successive webhook notifications, in milliseconds"
          maxRetries: 
            value: 5
            description: "Number of retried webhook notifications before it becomes inactive"
          runsSize: 
            value: 50
            description: "Size of the runs array"
      VERSIONING_SETTINGS:
        description:
          "- forceKeepHistory: when true, modification history of items is stored,
          - keep-authors: defines the behaviour of items deletion"
        value:
          forceKeepHistory: 
            value: false
            description: "When true, modification history of items is stored"
          deletionMode: 
            value: keep-authors
            description: "Defines the behaviour of items deletion.
            'keep-nothing': Delete history, keep head as itemDeletion as it is now by default.
            'keep-authors': Keep fields 'headId', 'id', 'modified', 'modifiedBy' in head and history.
            'keep-everything': Add 'deleted' field to head item, leave history as is."
      SSL_CAA_ISSUER: 
        value: letsencrypt.org
        description: "Certificate authority allowed to issue SSL certificates for this domain"
      INVITATION_TOKENS: 
        value: null
        description: "Allows to define a set of invitation tokens for user creation by providing
        # an array of strings as well as no check (null) & prevent all (empty array)"

